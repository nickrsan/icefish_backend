{% extends "icefish/index.django.html" %}
{% load staticfiles %}

{% block content %}
    <div class="pure-u-1-24" id="icefish_navbar">
        <img src="{% static "icefish/img/core/B195M_Logo_240.png" %}" id="icefish_logo">
        <ul>
            <li class="icefish_navbar_button">V</li>
            <li class="icefish_navbar_button">A</li>
            <li class="icefish_navbar_button">Ab</li>
        </ul>
    </div>
    <div class="pure-u-17-24" id="icefish_main">
        <div id="video" class="pure-u-1-1 video_container" style="height:68vh;"> <!-- height here doesn't control video size, but does push the spectrogram down to appropriate spot -->
            <div class="pure-u-1-12 letterbox" style="height:100%"></div>
            <div class="pure-u-5-6">
                <div id="WowzaPlayerElement" style="width:100%; height:0; padding:0 0 56.25% 0"></div>
            </div>
            <div class="pure-u-1-12 letterbox"></div>
        </div>
        <div id="spectrogram" style="height:32vh;"><!-- Waterfall Display -->
            <div id="waterfall-display" class="chart-holder" style="height:100%">
                <div class="chart"></div>
                <div class="chartmessage">Loading Waterfall Display...</div>
                <div class="ylabel">Frequency (Hz)</div>
                <div class="xlabel">Time</div>
            </div>
            <!-- Tool Bars -->
            <div id="toolbar" style="height:20%;display:none">
                <span>Step size: <select id="step" disabled="1"></select></span>
                <span id="abId0.5314168991210294">Reference: <input id="ref" size="2" value=46 disabled="1">dB ÂµPa</span>
                <span>Bandwidth: <span data-field="fftBandWidth">Loading...</span></span>
                <span id="abId0.433896597943322"><input id="view" size="2" value="4" disabled="1"> min(s)</span>
                <span><button id="rescale" disabled="1">Rescale</button></span>
                <span><button id="gobtn">Stop</button></span>
            </div>
        </div>
    </div>
    <div class="pure-u-1-4" id="icefish_charts">
        <div class="pure-u-1-24">
            <div class="pure-u-2-3" id="icefish_chart_toggle_bar">
                <a href="#" id="icefish_chart_toggle_link" onclick="change_chart_size();">
                    <i id="icefish_chart_toggle_button" class="fa fa-caret-left" aria-hidden="true"></i>
                </a>
            </div>
        </div>
        <div class="pure-u-22-24">
            <div id="temperature" class="icefish_chart"></div>
            <div id="pressure" class="icefish_chart"></div>
            <div id="salinity" class="icefish_chart"></div>
        </div>
    </div>
{% endblock %}

{% block footer_js %}
	<script src="{% static "icefish/js/common/jquery_cookie.js" %}"></script><!-- hydrophone requirement -->
	<script src="{% static "icefish/js/common/jquery_plot.js" %}"></script><!-- hydrophone requirement -->
    <script src="{% static "/icefish/js/spectrogram/chroma.js" %}"></script><!-- hydrophone requirement -->
    <script src="{% static "/icefish/js/spectrogram/spectrogram.js" %}"></script><!-- hydrophone requirement -->

    <script type="text/javascript">
        $( document ).ready(function() {
            get_initial_data({"temperature": "temperature", "pressure": "pressure", "salinity": "salinity"})
        });
    </script>

    <!-- intentionally putting this after the others since it requires an offcontinent request -->
    <script type="text/javascript" src="//player.wowza.com/player/latest/wowzaplayer.min.js"></script>
    <script>
        $( document ).ready(function() {
            WowzaPlayer.create('WowzaPlayerElement',
                {
                "license":"PLAY1-3QDBr-GdWfE-GA6MP-NDt9W-VYWuM",
                "title":"Live McMurdo Oceanographic Observatory",
                "description":"",
                "sourceURL":"http%3A%2F%2F157.132.104.177%3A1935%2FMOO%2Fsmil%3AAdaptaMoo.smil%2Fplaylist.m3u8",
                "autoPlay":true,
                "volume":"100",
                "mute":false,
                "loop":false,
                "audioOnly":false,
                "uiShowQuickRewind":false
                }
            );
        });
    </script>
{% endblock %}