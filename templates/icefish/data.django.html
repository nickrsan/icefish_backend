{% extends "icefish/index.django.html" %}
{% load staticfiles %}

{% block content %}
    <div class="pure-u-2-3">
        <div id="video" style="min-height:400px">
            <div id="WowzaPlayerElement" style="width:100%; height:0; padding:0 0 56.25% 0"></div>
        </div>
        <div id="spectrogram"><!-- Waterfall Display -->
            <div id="waterfall-display" class="chart-holder">
                <div class="chart" style="min-height:500px"></div>
                <div class="chartmessage">Loading Waterfall Display...</div>
                <div class="ylabel">Frequency (Hz)</div>
                <div class="xlabel">Time</div>
            </div>
            <!-- Tool Bars -->
            <div id="toolbar">
                <span>Step size: <select id="step" disabled="1"></select></span>
                <span id="abId0.5314168991210294">Reference: <input id="ref" size="2" value=46 disabled="1">dB ÂµPa</span>
                <span>Bandwidth: <span data-field="fftBandWidth">Loading...</span></span>
                <span id="abId0.433896597943322"><input id="view" size="2" value="4" disabled="1"> min(s)</span>
                <span><button id="rescale" disabled="1">Rescale</button></span>
                <span><button id="gobtn">Stop</button></span>
            </div>
        </div>
    </div>
    <div class="pure-u-1-3">
        <div id="temperature"></div>
        <div id="pressure"></div>
        <div id="salinity"></div>
    </div>
{% endblock %}

{% block footer_js %}
	<script src="{% static "icefish/js/common/jquery_cookie.js" %}"></script><!-- hydrophone requirement -->
	<script src="{% static "icefish/js/common/jquery_plot.js" %}"></script><!-- hydrophone requirement -->
    <script src="{% static "/icefish/js/spectrogram/chroma.js" %}"></script><!-- hydrophone requirement -->
    <script src="{% static "/icefish/js/spectrogram/spectrogram.js" %}"></script><!-- hydrophone requirement -->

    <script type="text/javascript">
        $( document ).ready(function() {
            get_initial_data({"temperature": "temperature", "pressure": "pressure", "salinity": "salinity"})
        });
    </script>

    <!-- intentionally putting this after the others since it requires an offcontinent request -->
    <script type="text/javascript" src="//player.wowza.com/player/latest/wowzaplayer.min.js"></script>
    <script>
        $( document ).ready(function() {
            WowzaPlayer.create('WowzaPlayerElement',
                {
                "license":"PLAY1-3QDBr-GdWfE-GA6MP-NDt9W-VYWuM",
                "title":"Live McMurdo Oceanographic Observatory",
                "description":"",
                "sourceURL":"http%3A%2F%2F157.132.104.177%3A1935%2FMOO%2Fsmil%3AAdaptaMoo.smil%2Fplaylist.m3u8",
                "autoPlay":true,
                "volume":"100",
                "mute":false,
                "loop":false,
                "audioOnly":false,
                "uiShowQuickRewind":false
                }
            );
        });
    </script>
{% endblock %}